{{>header}}
<div class="container">
  <div class="row">
    <div class="form-group col">
      <label for="name">Заглавие</label>
      <input type="text" id="name" class="form-control">
      <small class="form-text text-danger"></small>
    </div>
    <div class="form-group col">
      <label for="file">Zip файл</label>
      <input type="file" accept=".zip" id="file" class="form-control">
      <small class="form-text text-danger"></small>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <a class="btn btn-secondary" href="/works">Назад</a>
    </div>
    <div class="col">
      <button id="sendWork" class="btn btn-success">Добавяне</button>
    </div>
  </div>
</div>
{{>footer}}

<script>
  document.querySelector("#sendWork").addEventListener("click", async function (event) {
    event.preventDefault();
    const url = "/api/works/new";
    var formData = new FormData();
    var fileField = document.querySelector("input[type='file']");

    formData.append('name', document.querySelector("#name").value);
    formData.append('file', fileField.files[0]);

    let response = await fetch(url, {
      method: 'POST',
      body: formData
    });
    const responseJson = await response.json()
    console.log(responseJson)
  });
</script>