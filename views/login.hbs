{{>header}}
<div class="container">
  <div class="row align-items-center justify-content-center">
    <form class="input-form">
      <div class="form-group">
        <label for="userName">User Name</label>
        <input class="form-control" type="text" id="userName" placeholder="User Name">
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input class="form-control" type="text" id="password" placeholder="Password">
      </div>
      <button id="login" class="btn btn-primary">Login</button>
      <a class="btn btn-link" href="/register">Register</a>
    </form>
  </div>
</div>
{{>footer}}

<script>
  document.querySelector("#login").addEventListener('click', async function (event) {
    event.preventDefault()
    const userName = document.querySelector("#userName").value;
    const password = document.querySelector("#password").value;
    console.log(userName, password)
    const url = "/api/users/login";
    const data = { userName, password };
    const response = await fetch(url, {
      method: "POST",
      body: JSON.stringify(data),
      headers: {
        'Content-Type': 'application/json'
      }
    });
    if (!response.ok) {
      alert(response.statusText);
      return;
    }
    window.location.replace("/works");

  })

</script>